<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Tom O'Reilly">
   <meta name="GENERATOR" content="Mozilla/4.79 [en] (Windows NT 5.0; U) [Netscape]">
   <title>nodeTest</title>
</head>
<body>
<blockquote>
<table width="96%" border="0" align="center">
    <tr> 
      <td> 
        <p><b>NAME</b> </p>
        <blockquote>Scheduler</blockquote>
        <p><br>
          <b>SYNOPSIS</b> 
        <blockquote> 
          <pre>Utilities for scheduling data acquisition and system tasks</pre>
        </blockquote>
        <p><br>
        <p><b>DESCRIPTION</b> </p>
        <blockquote> 
          <p><i>Overview</i></p>
          <p>The scheduler for SIAM is a very flexible scheduler that is similar 
            in many respects to the Unix cron utility. Using a terse syntax, it 
            facilitates scheduling tasks at a set of fixed, absolute times or 
            periodically at a specified rate.</p>
          <p> Schedules are described in text files using a cron-like syntax. 
            Each schedule consists of a number of entries, delimited by newlines; 
            each entry contains 12 fields, described in the table below. A description 
            of the entry syntax follows. </p>
          <table width="90%" border="1" align="center">
            <tr> 
              <th width="18%"> 
                <div align="center">Field</div>
              </th>
              <th width="23%"> 
                <div align="center">Description</div>
              </th>
              <th width="26%"> 
                <div align="center">Allowed Values</div>
              </th>
              <th width="33%"> 
                <div align="center">Comments</div>
              </th>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>type</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Type of schedule entry<br>
                  (relative or absolute)</div>
              </td>
              <td width="26%"> 
                <div align="center">r<br>
                  a </div>
              </td>
              <td width="33%"> 
                <div align="left">case insensitive</div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>second</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Seconds mask</div>
              </td>
              <td width="26%"> 
                <div align="center">*<br>
                  0-59</div>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>minute</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Minutes mask</div>
              </td>
              <td width="26%"> 
                <div align="center">*<br>
                  0-59</div>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>hour</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Hours mask</div>
              </td>
              <td width="26%"> 
                <div align="center">*<br>
                  0-23</div>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>day</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Days modulus</div>
              </td>
              <td width="26%"> 
                <div align="center">*<br>
                  integer </div>
              </td>
              <td width="33%"> 
                <div align="left">Modulus portion used for relative schedules 
                  only.<br>
                  <br>
                  Mask portion must be *.</div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>month</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Months mask</div>
              </td>
              <td width="26%"> 
                <div align="center">*<br>
                  0-7<br>
                  jan,feb,mar,apr,may,jun,<br>
		  jul,aug,sep,oct,nov
                   </div>
              </td>
              <td width="33%"> 
	          <br>
                  <br>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>day of week</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Weekday mask</div>
              </td>
              <td width="26%"> 
                <div align="center">*<br>
                  0-7<br>
                  sun,mon,tue,wed<br>
                  thu,fri,sat</div>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>day of month</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Month Day mask</div>
              </td>
              <td width="26%"> 
                <p align="center">*<br>
                  0-31<br>
                   </p>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>day of year</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Day of year mask</div>
              </td>
              <td width="26%"> 
                <div align="center">*<br>
                  0-365</div>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>time zone</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Compute time in this time zone (to operate 
                  during local daylight hours, for example)</div>
              </td>
              <td width="26%"> 
                <div align="center"> GMT[&plusmn; n]</div>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>max cycles</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Stop execution after max cycles</div>
              </td>
              <td width="26%"> 
                <p align="center"> *<br>
                  integer</p>
              </td>
              <td width="33%"> 
                <div align="left"></div>
              </td>
            </tr>
            <tr> 
              <td width="18%"> 
                <div align="center"><b>job</b></div>
              </td>
              <td width="23%"> 
                <div align="center">Name of job file</div>
              </td>
              <td width="26%"> 
                <div align="center">string</div>
              </td>
              <td width="33%"> 
                <div align="left"> 
                  <p>path relative to schedulePath, set in scheduler.cfg</p>
                  <p>Note: Use of the job field is deprecated;</p>
                </div>
              </td>
            </tr>
          </table>
          <blockquote>
            <p><i>Types of Schedules<font size="+1"><br>
              </font></i><br>
              There are two types of schedules: relative and absolute. Absolute 
              schedules are analogous to crontab entries; they represent a set 
              of specific times at which to perform some task. An absolute schedule 
              would be used, for example, to schedule a task to run Monday,Wednesday, 
              and Saturday at 12:00 and 18:00, or at quarter past the hour, every 
              hour between 0600 and 13:00.<br>
              <br>
              Relative schedules are used to schedule a task for execution at 
              an arbitrarily long fixed period. Relative schedules can be masked 
              to operate only during certain times. A relative schedule would 
              be used to schedule a task to execute every 47 minutes, or every 
              2 days, 3 hours, and 20 minutes, but only june-august during daylight 
              hours. Relative schedules may be shifted by some delay to align 
              (or avoid alignment) with other tasks, or to execute their initial 
              cycle at a specific time.</p>
            <p> The key difference between absolute and relative schedules is 
              that absolute schedules execute at a specific set of times that 
              are not necessarily periodic and will be the same regardless of 
              when they begin, but relative schedules are strictly periodic, and 
              their execution times are determined relative to the time they begin.<br>
              <br>
              <i>Entry Syntax</i><br>
              <br>
              The schedule specification consists of 11 fields describing the 
              set of execution times, all separated by whitespace. In general, 
              each field consists of a mask followed by a modulus, of the form</p>
            <p>mask/modulus</p>
            <p>The modulus is always a number; the mask consists of a list of 
              comma-delimited ranges of numbers or names, for example:</p>
            <p>3,5,11-22,7<br>
              thu-sun,tue<br>
              mar,may-aug<br>
              <br>
              An asterisk (*) may be used as a mask to represent the range &quot;first-last&quot;.</p>
            <p> Ranges of numbers are allowed. Ranges are two numbers separated 
              with a hyphen. The specified range is inclu-<br>
              sive. For example, 8-11 for an &quot;hours&quot; entry specifies 
              execution at hours 8, 9, 10 and 11.</p>
            <p> Lists are allowed. A list is a set of numbers and/or ranges separated 
              by commas. Examples: ``1,2,5,9'', ``0-4,8-12''.</p>
            <p> The mask and modulus are interpreted differently for relative 
              and absolute schedules:</p>
            <p>The modulus values can be used in conjunction with ranges to skip 
              certain values in each range. For absolute schedules, fol lowing 
              a range with &quot;/n&quot; indicates that only every nth value 
              of the range is included in the mask. For example, &quot;0-23/2&quot; 
              can be used in the hours field to specify command execution every 
              other hour (the alternative in the V7 standard is ``0,2,4,6,8,10,12,14,16,18,20,22''). 
              Steps are also permitted after an asterisk, so if you want to say 
              &quot;every two hours'', just use &quot;*/2&quot;. </p>
            <p>For relative schedules, the modulus is used to compute the execution 
              period. The mask portion is used to mask off certain execution times. 
              For example, </p>
            <p>r * */3 13-23/2...<br>
              <br>
              indicates that execution should occur every two hours and 3 minutes, 
              but only between the hours of 1 p.m. and 11 p.m.. By contrast, the 
              same entry for an absolute schedule would indicate every third minute 
              of every odd hour between 1 p.m. and 11 p.m. : &quot;13:00,13:03...13:57,15:00,15:03...15:57,17:00....&quot;</p>
            <p> Names can also be used for the &quot;month&quot; and &quot;day 
              of week&quot; fields. Use the first three letters of the partic-<br>
              ular day or month (case insensitive). Ranges or lists of names are 
              allowed.<br>
            </p>
            <p> The last field (to the end of the line) specifies the job file 
              to be run (Note: the use of the job field is deprecated; it may 
              be included, and will be displayed by toString(), but is not functional). 
            </p>
            <p><i>Examples</i></p>
            <p># Run a job every 10 seconds between 50 past and 10 past the minute<br>
              r 50-10/10 * * * * * * * GMT *<br>
              <br>
              # Run job at 0,15,30,45 past the hour, every other hour between 
              midnight and 6 a.m. and<br>
              # between noon and 6 p.m. (GMT-8 time zone), mon-fri <br>
              # Stop after 300 cycles<br>
              a 0 0,15,30,45 0-6,12-18/2 * mon-fri * * * GMT-8 300</p>
            <p><i>Interface</i></p>
            <p>A number of utilities are provided (under siam/utils/) to manipulate 
              schedules:</p>
            <ul>
              <li>addSchedule</li>
              <li>setSchedule</li>
              <li> removeSchedule</li>
              <li> showSchedule</li>
              <li> suspendSchedule</li>
              <li>resumeSchedule </li>
            </ul>
            <p>The use syntax is </p>
            <blockquote> 
              <table width="90%" border="1" cellpadding="5">
                <tr> 
                  <th width="18%">Name</th>
                  <th width="42%">Use Syntax</th>
                  <th width="40%">Description</th>
                </tr>
                <tr> 
                  <td width="18%">showSchedule</td>
                  <td width="42%">showSchedule &lt;nodeURL&gt; [&lt;port&gt; [&lt;scheduleName&gt;]]... 
                  </td>
                  <td width="40%"> 
                    <p>Display the current state of specified schedule(s). If 
                      no port or schedule is specified, all schedules on the given 
                      nodeURL will be displayed.</p>
                    <p>The information displayed includes the names of all schedules, 
                      making this a good place to start. All instrument services 
                      have a schedule named Default which implements their default 
                      sampling schedule..</p>
                  </td>
                </tr>
                <tr> 
                  <td width="18%">addSchedule</td>
                  <td width="42%">addSchedule &lt;nodeURL&gt; &lt;port&gt; &lt;scheduleName&gt; 
                    &lt;scheduleSpecifier&gt; [<b>o</b>verwrite] </td>
                  <td width="40%"> 
                    <p>Adds a schedule for the specified device (port). If the 
                      device does not recognize scheduleName, the schedule will 
                      not be added. </p>
                    <p>If the overwrite option (&quot;o&quot;) is specified, the 
                      schedule (if scheduleName is valid) will be overwritten 
                      if it already exists. </p>
                    <p>If the overwrite option is not specified (and scheduleName 
                      is valid), addSchedule will return a message indicating 
                      that the schedule already exists and will not modify the 
                      schedule.</p>
                  </td>
                </tr>
                <tr> 
                  <td width="18%">setSchedule</td>
                  <td width="42%">setSchedule &lt;nodeURL&gt; &lt;port&gt; &lt;scheduleName&gt; 
                    &lt;scheduleSpecifier&gt;</td>
                  <td width="40%">Same as addSchedule; the overwrite option is 
                    implicitly asserted </td>
                </tr>
                <tr> 
                  <td width="18%">removeSchedule</td>
                  <td width="42%">removeSchedule &lt;nodeURL&gt; &lt;port&gt; 
                    &lt;scheduleName&gt; </td>
                  <td width="40%">Removes the specified schedule</td>
                </tr>
                <tr> 
                  <td width="18%">suspendSchedule</td>
                  <td width="42%">suspendSchedule &lt;nodeURL&gt; &lt;port&gt; 
                    &lt;scheduleName&gt; </td>
                  <td width="40%"> 
                    <p>Suspends the action for the specified schedule. This may 
                      be useful for temporarily disabling a device without interrupting 
                      its schedule. </p>
                    <p>The schedule continues to run, but exits immediately instead 
                      of performing its scheduled task. </p>
                  </td>
                </tr>
                <tr> 
                  <td width="18%">resumeSchedule</td>
                  <td width="42%">resumeSchedule &lt;nodeURL&gt; &lt;port&gt; 
                    &lt;scheduleName&gt; </td>
                  <td width="40%">Informs a suspended task to resume normal operation</td>
                </tr>
                <tr> 
                  <td width="18%">synch</td>
                  <td width="42%">synch &lt;nodeURL&gt; &lt;port&gt; &lt;scheduleName&gt; 
                    [&lt;delay ms&gt;] </td>
                  <td width="40%"> 
                    <p>Causes the specified schedule to execute after the specified 
                      delay (default delay is 0 ms).</p>
                    <p>May be used to shift the relative starting times of relative 
                      schedules. Absolute schedules will execute after the specified 
                      delay, but are otherwise unaffected.</p>
                  </td>
                </tr>
              </table>
              <p><b>ENVIRONMENT</b> </p>
            </blockquote>
          </blockquote>
          <ul>
            Currently the utilities are found in the CVS repository under siam/utils. 
            The following files are relevant. 
          </ul>
          <table width="75%" border="1" cellpadding="4" align="center">
            <tr> 
              <td width="42%"> 
                <div align="left">siam/properties/scheduler.cfg</div>
              </td>
              <td width="58%"> 
                <div align="left">Scheduler configuration</div>
              </td>
            </tr>
            <tr> 
              <td width="42%"> 
                <div align="left">siam/properties/siamPort.cfg</div>
              </td>
              <td width="58%"> 
                <div align="left">Scheduler configuration</div>
              </td>
            </tr>
            <tr> 
              <td width="42%">siam/utils/addSchedule</td>
              <td width="58%">Add a schedule w/ optional overwrite</td>
            </tr>
            <tr> 
              <td width="42%">siam/utils/setSchedule</td>
              <td width="58%">Load a schedule</td>
            </tr>
            <tr> 
              <td width="42%">siam/utils/removeSchedule</td>
              <td width="58%">Unload a schedule</td>
            </tr>
            <tr> 
              <td width="42%">siam/utils/suspendSchedule</td>
              <td width="58%">Suspend a schedule</td>
            </tr>
            <tr> 
              <td width="42%">siam/utils/resumeSchedule</td>
              <td width="58%">Resume a schedule</td>
            </tr>
            <tr> 
              <td width="42%">siam/utils/showSchedule</td>
              <td width="58%">Show schedule status</td>
            </tr>
          </table>
          <br>
          <blockquote> 
            <p>The scheduler interface utilites require the bash shell</p>
          </blockquote>
          <p><b>SEE ALSO</b> </p>
          <p>&nbsp;</p>
        </blockquote>
      </td>
    </tr>
  </table>
  <br>
</blockquote>
<blockquote>
  <div align="center"></div>
  <p>&nbsp; </p>
</blockquote>

</body>
</html>
